import os
from datetime import datetime
import pytz

# í•œêµ­ ì‹œê°„ ì„¤ì •
KST = pytz.timezone('Asia/Seoul')
CURRENT_TIME = datetime.now(KST).strftime("%Y-%m-%d %H:%M:%S (KST)")

# í†µí•© ë°ì´í„° ì†ŒìŠ¤
DATA_SOURCES = {
    "ğŸ“¢ ê³µì‹ ì±„ë„ (Official)": [
        {"name": "ê³µì‹ íŠ¸ìœ„í„° (ê¸€ë¡œë²Œ)", "url": "https://twitter.com/PokemonGoApp"},
        {"name": "ê³µì‹ íŠ¸ìœ„í„° (í•œêµ­)", "url": "https://twitter.com/PokemonGOAppKR"},
        {"name": "ê³µì‹ ë¸”ë¡œê·¸ (ë‰´ìŠ¤)", "url": "https://pokemongolive.com/post/"},
    ],
    "âš¡ ì†ë³´ ë° ë°ì´í„° (Intel)": [
        {"name": "LeekDuck (ì´ë²¤íŠ¸ ì¼ì •)", "url": "https://leekduck.com/"},
        {"name": "The Silph Road (ì—°êµ¬ ë°ì´í„°)", "url": "https://thesilphroad.com/"},
        {"name": "PokÃ©mon GO Hub (ì¢…í•© ë‰´ìŠ¤)", "url": "https://pokemongohub.net/"},
        {"name": "GO Stadium (PvP ë­í‚¹)", "url": "https://gobattlelog.com/"},
    ],
    "ğŸ“º í•„ìˆ˜ ìœ íŠœë¸Œ ì±„ë„ (Influencers)": [
        {"name": "ìŒˆ (Ssam) - í•œêµ­ ê³µëµ", "url": "https://www.youtube.com/@ssampogotv"},
        {"name": "ìŸêµ¬ (Jaenggu) - ë‰´ìŠ¤/í‹°ì–´", "url": "https://www.youtube.com/@jaenggu"},
        {"name": "Trainer Tips (ì‹¬ì¸µ ë¶„ì„)", "url": "https://www.youtube.com/c/TrainerTips"},
        {"name": "BrandonTan91 (í•˜ë“œì½”ì–´)", "url": "https://www.youtube.com/c/BrandonTan91"},
        {"name": "ZyoniK (PvP ì „ë¬¸)", "url": "https://www.youtube.com/c/ZyoniK"},
    ],
    "ğŸ“š ë„ê° ë° DB (All PokÃ©mon Database)": [
        {"name": "ğŸ‡°ğŸ‡· í•œêµ­ ê³µì‹ í¬ì¼“ëª¬ ë„ê° (ì¼ëŸ¬ìŠ¤íŠ¸)", "url": "https://www.pokemonkorea.co.kr/pokedex"},
        {"name": "ğŸ“Š GO Hub ìŠ¤íƒ¯ DB (CP/ê³µê²©ê°’)", "url": "https://db.pokemongohub.net/"},
        {"name": "âœ¨ ì´ë¡œì¹˜(Shiny) ëª¨ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸", "url": "https://leekduck.com/shiny/"},
        {"name": "ğŸ“– ë‚˜ë¬´ìœ„í‚¤ í¬ì¼“ëª¬ê³  ë„ê° (ì‹¤ì „ íŒ)", "url": "https://namu.wiki/w/PokÃ©mon%20GO/%ED%8F%AC%EC%BC%93%EB%AA%AC%20%EB%8F%84%EA%B0%90"},
    ]
}

def generate_markdown():
    md_content = f"# ğŸ“± PokÃ©mon GO Daily Ops Dashboard\n"
    md_content += f"**Updated:** {CURRENT_TIME}\n\n"
    md_content += "> Grand-Ops-Masterë‹˜ì„ ìœ„í•œ ì¼ì¼ í¬ì¼“ëª¬ê³  ë¸Œë¦¬í•‘ ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.\n\n"

    for category, sites in DATA_SOURCES.items():
        md_content += f"## {category}\n"
        md_content += "| ì†ŒìŠ¤ ì´ë¦„ | ë°”ë¡œê°€ê¸° |\n"
        md_content += "| --- | --- |\n"
        for site in sites:
            md_content += f"| **{site['name']}** | [Link]({site['url']}) |\n"
        md_content += "\n"
    
    md_content += "---\n"
    md_content += "*Generated by GitHub Actions for Grand-Ops-Master*"
    
    return md_content

if __name__ == "__main__":
    report = generate_markdown()
    
    # íŒŒì¼ë¡œ ì €ì¥
    with open("POGO_DAILY_BRIEF.md", "w", encoding="utf-8") as f:
        f.write(report)
    
    print("âœ… Dashboard generated successfully with Pokedex links.")
