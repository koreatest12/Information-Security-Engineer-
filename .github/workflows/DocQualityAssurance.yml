name: ğŸ›¡ï¸ Doc Quality Assurance (CI)

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  markdown-lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      # [ìˆ˜ì •ë¨] MD013(ì¤„ê¸¸ì´) ë¬´ì‹œ, MD007(ë“¤ì—¬ì“°ê¸°) 2ì¹¸ ì„¤ì • íŒŒì¼ ìƒì„±
      - name: Create Markdownlint Config
        run: |
          echo '{ "MD013": false, "MD007": { "indent": 2 } }' > .markdownlint-cli2.jsonc

      # [ìˆ˜ì •ë¨] 'config_file' ì˜µì…˜ ì œê±° (ìë™ ê°ì§€ë¨)
      - name: Markdown Linting
        uses: DavidAnson/markdownlint-cli2-action@v16
        with:
          globs: "**/*.md"

  link-check:
    runs-on: ubuntu-latest
    needs: markdown-lint
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Link Checker (Lychee)
        uses: lycheeverse/lychee-action@v1.9.0
        with:
          args: --verbose --no-progress --timeout 20 "**/*.md"
          fail: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
