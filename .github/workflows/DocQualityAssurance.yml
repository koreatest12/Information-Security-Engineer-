name: ğŸ›¡ï¸ Doc Quality Assurance (CI)

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  markdown-lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      # [ìˆ˜ì •ë¨] í•œêµ­ì–´ ë¬¸ì„œ íŠ¹ì„±ìƒ ì¤„ ê¸¸ì´(MD013) ì œí•œì„ ë„ëŠ” ì„¤ì • íŒŒì¼ ìƒì„±
      - name: Create Markdownlint Config
        run: |
          echo '{ "MD013": false, "MD007": { "indent": 2 } }' > .markdownlint-cli2.jsonc

      # [ìˆ˜ì •ë¨] ì„¤ì • íŒŒì¼ì„ ì°¸ì¡°í•˜ì—¬ ë¦°íŠ¸ ì‹¤í–‰
      - name: Markdown Linting
        uses: DavidAnson/markdownlint-cli2-action@v16
        with:
          globs: "**/*.md"
          config_file: .markdownlint-cli2.jsonc

  link-check:
    runs-on: ubuntu-latest
    needs: markdown-lint # ë¦°íŠ¸ê°€ í†µê³¼ëœ í›„ì—ë§Œ ì‹¤í–‰
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Link Checker (Lychee)
        uses: lycheeverse/lychee-action@v1.9.0
        with:
          args: --verbose --no-progress --timeout 20 "**/*.md"
          fail: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
