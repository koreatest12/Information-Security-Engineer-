name: PokÃ©mon GO Daily Ops Briefing

on:
  schedule:
    # ë§¤ì¼ 00:00 UTC (í•œêµ­ ì‹œê°„ 09:00)
    - cron: '0 0 * * *'
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

permissions:
  contents: write

jobs:
  update-dashboard:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4
        with:
          ref: main  # ëª…ì‹œì ìœ¼ë¡œ main ë¸Œëœì¹˜ë¥¼ íƒ€ê²ŸíŒ…
          fetch-depth: 0 # ì „ì²´ íˆìŠ¤í† ë¦¬ ê°€ì ¸ì˜¤ê¸°

      # â–¼â–¼â–¼ [í•µì‹¬ ìˆ˜ì • 1] ë¡œì»¬ ìƒíƒœë¥¼ ì›ê²©ê³¼ ê°•ì œë¡œ ì¼ì¹˜ì‹œí‚´ (ì¶©ëŒ ì›ì²œ ì°¨ë‹¨) â–¼â–¼â–¼
      - name: ğŸ”„ Hard Reset to Remote
        run: |
          git fetch origin main
          git reset --hard origin/main
          echo "âœ… Local branch reset to match origin/main exactly."

      - name: ğŸ Set up Python 3.12
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      - name: ğŸ“¦ Install Dependencies
        run: |
          pip install -r requirements.txt

      # â–¼â–¼â–¼ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (ëŒ€ì‹œë³´ë“œ ê°±ì‹  ë° ë°ì´í„° ëˆ„ì ) â–¼â–¼â–¼
      - name: ğŸ”„ Generate Dashboard
        run: |
          python scripts/generate_dashboard.py

      # â–¼â–¼â–¼ [í•µì‹¬ ìˆ˜ì • 2] ê°•ì œ í‘¸ì‹œ ì˜µì…˜ ì¶”ê°€ (--force) â–¼â–¼â–¼
      - name: ğŸ’¾ Commit and Push Changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "docs: Update POGO Dashboard & History [skip ci]"
          file_pattern: "POGO_DAILY_BRIEF.md"
          commit_user_name: "Grand-Ops-Master-Bot"
          commit_user_email: "actions@github.com"
          # ì¤‘ìš”: íˆìŠ¤í† ë¦¬ê°€ ê¼¬ì—¬ë„ ë¬´ì¡°ê±´ ì—…ë°ì´íŠ¸ ë°˜ì˜
          push_options: '--force'
